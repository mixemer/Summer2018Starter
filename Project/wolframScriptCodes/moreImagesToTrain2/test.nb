(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='WolframDesktop 11.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       161,          7]
NotebookDataLength[      8124,        221]
NotebookOptionsPosition[      6918,        194]
NotebookOutlinePosition[      7271,        210]
CellTagsIndexPosition[      7228,        207]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"Print", "[", "\"\<Starting Script.\>\"", "]"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{"encodeID", "[", "expr_", "]"}], ":=", 
  RowBox[{"StringReplace", "[", 
   RowBox[{
    RowBox[{"Developer`EncodeBase64", "@", 
     RowBox[{"BinarySerialize", "@", "expr"}]}], ",", 
    RowBox[{"\"\</\>\"", "->", "\"\<~\>\""}]}], "]"}]}], "\n", 
 RowBox[{
  RowBox[{"decodeID", "[", "expr_", "]"}], ":=", 
  RowBox[{"BinaryDeserialize", "@", 
   RowBox[{"Developer`DecodeBase64ToByteArray", "@", 
    RowBox[{"StringReplace", "[", 
     RowBox[{"expr", ",", 
      RowBox[{"\"\<~\>\"", "->", "\"\</\>\""}]}], "]"}]}]}]}], "\n"}], "Code",\

 CellChangeTimes->{{3.7401559772304707`*^9, 3.740156110783992*^9}, {
  3.7401561419531507`*^9, 3.7401561495324097`*^9}},
 CellLabel->"In[53]:=",ExpressionUUID->"4d88e08e-d951-4577-bd50-bf0114e22f79"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"ClearAll", "[", 
   RowBox[{"getFileNames", ",", "fromFileNameGetGeoRange"}], "]"}], 
  "\n"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"getFileNames", "[", "folderName_", "]"}], " ", ":=", " ", "\n", 
    "\t", 
    RowBox[{"FileNames", "[", 
     RowBox[{"\"\<*.png\>\"", ",", 
      RowBox[{"\"\<~/moreImagesToTrain/\>\"", "<>", "folderName"}], ",", 
      "Infinity"}], "]"}]}], ";"}], "\n", "\t", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"FileNames", "[", 
     RowBox[{"\"\<*.png\>\"", ",", 
      RowBox[{"FileNameJoin", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"NotebookDirectory", "[", "]"}], ",", "folderName"}], "}"}], 
       "]"}], ",", "Infinity"}], "]"}], ";"}], "*)"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"fromFileNameGetGeoRange", "[", "fileName_", "]"}], " ", ":=", " ",
    "\n", "\t", 
   RowBox[{
    RowBox[{"decodeID", "[", 
     RowBox[{"FileBaseName", "@", "fileName"}], "]"}], "[", 
    "\"\<GeoRange\>\"", "]"}]}], ";"}]}], "Code",
 CellChangeTimes->{{3.740156300164914*^9, 3.7401563459147873`*^9}, 
   3.7401564101386967`*^9, {3.7401570221038303`*^9, 3.740157030793556*^9}},
 CellLabel->
  "In[103]:=",ExpressionUUID->"f44fedb8-1eeb-4b8a-9de9-debf750800db"],

Cell[BoxData[{
 RowBox[{"ClearAll", "[", "associateFilesToGeoRange", "]"}], "\n", 
 RowBox[{
  RowBox[{"associateFilesToGeoRange", "[", "fileNames_", "]"}], " ", ":=", 
  " ", "\n", "\t", 
  RowBox[{"Map", "[", "\n", "\t\t", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"File", "[", "#", "]"}], " ", "->", " ", 
      RowBox[{"fromFileNameGetGeoRange", "[", "#", "]"}]}], " ", "&"}], ",", 
    "\n", "\t\t", 
    RowBox[{"getFileNames", "[", "fileNames", "]"}]}], "\n", "\t", 
   "]"}]}]}], "Code",
 CellLabel->"In[59]:=",ExpressionUUID->"00065456-14fc-4afa-8f8c-1b62a714adf3"],

Cell[BoxData[{
 RowBox[{"ClearAll", "[", 
  RowBox[{"training", ",", "validation"}], "]"}], "\n", 
 RowBox[{
  RowBox[{"Print", "[", "\"\<get data.\>\"", "]"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{"training", " ", "=", " ", 
   RowBox[{"associateFilesToGeoRange", "[", "\"\<training\>\"", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"validation", " ", "=", " ", 
    RowBox[{"associateFilesToGeoRange", "[", "\"\<validation\>\"", "]"}]}], 
   ";"}], "\n"}], "\n", 
 RowBox[{"Print", "[", 
  RowBox[{"training", "//", "Length"}], "]"}], "\n", 
 RowBox[{"Print", "[", 
  RowBox[{"validation", "//", "Length"}], "]"}]}], "Code",
 CellChangeTimes->{{3.740156332742579*^9, 3.740156332901248*^9}, 
   3.740156424630761*^9, {3.740156890882207*^9, 3.740156902959579*^9}, {
   3.740157064938983*^9, 
   3.740157067147502*^9}},ExpressionUUID->"5f3db890-a0e4-4c88-8a93-\
a9182aeeb86a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"dir", "=", "\"\<~/moreImagesToTrain/progress\>\""}]], "Code",
 CellChangeTimes->{{3.740156809360764*^9, 3.740156819469215*^9}, {
  3.7401570809742804`*^9, 
  3.740157090083921*^9}},ExpressionUUID->"942ac6c2-5ae0-4038-a39e-\
dad91b5e0a97"],

Cell[BoxData["\<\"/Users/mehmetsahin/Desktop/wolframscpt/moreImagesToTrain/\
progress\"\>"], "Output",
 CellChangeTimes->{3.7401567692176332`*^9, 3.7401568227964373`*^9, 
  3.7401569087258053`*^9},
 CellLabel->"Out[99]=",ExpressionUUID->"750bb582-a5b0-4fca-8939-76cb2bee836a"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{"ClearAll", "[", "tnet", "]"}], "\n", 
 RowBox[{
  RowBox[{"tnet", " ", "=", " ", 
   RowBox[{
   "Import", "[", 
    "\"\</Users/mehmetsahin/Desktop/wolframscpt/moreImagesToTrain/\
amazonTrainedNet.wlnet\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "File", "[", "\"\<~/moreImagesToTrain/amazonTrainedNet.wlnet\>\"", "]"}], 
   "*)"}]}]}], "Code",
 CellChangeTimes->{{3.740156359712263*^9, 
  3.7401563820683804`*^9}},ExpressionUUID->"585eb2f7-8919-4a7f-ae1f-\
695a674b2ce4"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Print", "[", "\"\<training starts...\>\"", "]"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{"ClearAll", "[", "netTrained", "]"}], "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{"netTrained", " ", "=", " ", 
   RowBox[{"NetTrain", "[", 
    RowBox[{"tnet", ",", "training", ",", "All", ",", 
     RowBox[{"ValidationSet", "->", "validation"}], ",", 
     RowBox[{"TargetDevice", "\[Rule]", "\"\<GPU\>\""}], ",", "\n", 
     RowBox[{"TrainingProgressCheckpointing", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"\"\<Directory\>\"", ",", "dir"}], "}"}]}]}], "\n", "]"}]}], 
  ";"}]}], "Code",
 CellChangeTimes->{{3.7401564372349586`*^9, 3.740156437622922*^9}, {
  3.740156491592411*^9, 3.740156491787826*^9}, {3.740156580675215*^9, 
  3.740156580869193*^9}, {3.740156765964169*^9, 3.74015676630777*^9}, {
  3.74015680209306*^9, 3.740156832255713*^9}, {3.740157098311524*^9, 
  3.740157105585082*^9}},ExpressionUUID->"b2a00a08-44dd-4843-a5bc-\
18b516050307"],

Cell[BoxData["\<\"training starts...\"\>"], "Print",
 CellChangeTimes->{{3.740156828120451*^9, 3.740156832551886*^9}, 
   3.740156914105274*^9},
 CellLabel->
  "During evaluation of \
In[100]:=",ExpressionUUID->"03d2c1de-a1b2-46a1-b77b-f2aa365e2c1e"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"\n", 
  RowBox[{
   RowBox[{"Print", "[", "\"\<exporting...\>\"", "]"}], "\n", 
   RowBox[{"Export", "[", 
    RowBox[{"\"\<amazonTrainedNet2.wlnet\>\"", ",", "netTrained"}], "]"}], 
   "\n"}]}]], "Code",
 CellChangeTimes->{{3.740156162550901*^9, 
  3.7401562299853773`*^9}},ExpressionUUID->"e79b5125-822b-40fb-976c-\
856d09e7f783"]
},
WindowSize->{917, 755},
WindowMargins->{{Automatic, 2}, {Automatic, 40}},
FrontEndVersion->"11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 7, \
2018)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[561, 20, 860, 20, 129, "Code",ExpressionUUID->"4d88e08e-d951-4577-bd50-bf0114e22f79"],
Cell[1424, 42, 1266, 34, 186, "Code",ExpressionUUID->"f44fedb8-1eeb-4b8a-9de9-debf750800db"],
Cell[2693, 78, 586, 14, 148, "Code",ExpressionUUID->"00065456-14fc-4afa-8f8c-1b62a714adf3"],
Cell[3282, 94, 887, 22, 186, "Code",ExpressionUUID->"5f3db890-a0e4-4c88-8a93-a9182aeeb86a"],
Cell[CellGroupData[{
Cell[4194, 120, 262, 5, 52, "Code",ExpressionUUID->"942ac6c2-5ae0-4038-a39e-dad91b5e0a97"],
Cell[4459, 127, 276, 4, 34, "Output",ExpressionUUID->"750bb582-a5b0-4fca-8939-76cb2bee836a"]
}, Open  ]],
Cell[4750, 134, 525, 15, 91, "Code",ExpressionUUID->"585eb2f7-8919-4a7f-ae1f-695a674b2ce4"],
Cell[CellGroupData[{
Cell[5300, 153, 990, 20, 167, "Code",ExpressionUUID->"b2a00a08-44dd-4843-a5bc-18b516050307"],
Cell[6293, 175, 250, 5, 24, "Print",ExpressionUUID->"03d2c1de-a1b2-46a1-b77b-f2aa365e2c1e"]
}, Open  ]],
Cell[6558, 183, 356, 9, 110, "Code",ExpressionUUID->"e79b5125-822b-40fb-976c-856d09e7f783"]
}
]
*)

